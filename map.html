<!DOCTYPE html>
<html lang="kk">

<head>
	<meta charset="UTF-8" />
	<title>Интерактивті карта – Маңғыстау Explorer</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
	
	<!-- Leaflet -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		:root {
			--sand: #E8D5C4;
			--stone: #4A4A4A;
			--desert: #C19A6B;
			--sky: #87CEEB;
			--text-dark: #2C2C2C;
			--text-light: #FFFFFF;
			--bg-light: #F8F6F3;
			--card-bg: #FFFFFF;
		}

		html,
		body {
			margin: 0;
			height: 100%;
			font-family: 'Inter', system-ui, sans-serif;
			overflow: hidden;
		}

		body {
			display: flex;
			background: var(--bg-light);
		}

		/* Enhanced header with backdrop blur */
		header {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 72px;
			z-index: 1000;
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 0 clamp(20px, 5vw, 60px);
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(12px);
			-webkit-backdrop-filter: blur(12px);
			border-bottom: 1px solid rgba(0, 0, 0, 0.08);
			box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
		}

		.logo {
			font-size: 20px;
			font-weight: 800;
			letter-spacing: -0.02em;
			color: var(--text-dark);
		}

		nav {
			display: flex;
			gap: 40px;
		}

		nav a {
			color: var(--text-dark);
			text-decoration: none;
			font-size: 15px;
			font-weight: 600;
			opacity: 0.7;
			transition: opacity 0.2s ease, transform 0.2s ease;
			position: relative;
		}

		nav a:hover {
			opacity: 1;
			transform: translateY(-1px);
		}

		nav a.selected {
			opacity: 1;
		}

		nav a.selected::after {
			content: '';
			position: absolute;
			bottom: -8px;
			left: 0;
			right: 0;
			height: 2px;
			background: var(--text-dark);
			border-radius: 2px;
		}

		/* Modern sidebar with card design */
		.sidebar {
			width: 380px;
			background: var(--bg-light);
			padding: 92px 24px 24px;
			box-sizing: border-box;
			overflow-y: auto;
			border-right: 1px solid rgba(0, 0, 0, 0.08);
		}

		.sidebar::-webkit-scrollbar {
			width: 8px;
		}

		.sidebar::-webkit-scrollbar-track {
			background: transparent;
		}

		.sidebar::-webkit-scrollbar-thumb {
			background: rgba(0, 0, 0, 0.15);
			border-radius: 4px;
		}

		.sidebar::-webkit-scrollbar-thumb:hover {
			background: rgba(0, 0, 0, 0.25);
		}

		.sidebar-header {
			margin-bottom: 24px;
		}

		.sidebar h2 {
			font-size: 24px;
			font-weight: 800;
			color: var(--text-dark);
			margin-bottom: 8px;
			letter-spacing: -0.02em;
		}

		.sidebar-subtitle {
			font-size: 14px;
			color: var(--stone);
			opacity: 0.7;
		}

		/* Beautiful location cards with images */
		.location-card {
			background: var(--card-bg);
			border-radius: 16px;
			padding: 16px;
			margin-bottom: 12px;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			border: 2px solid transparent;
			display: flex;
			gap: 16px;
			align-items: center;
		}

		.location-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
			border-color: var(--desert);
		}

		.location-card.active {
			border-color: var(--stone);
			background: linear-gradient(135deg, #f5f5f5 0%, #ffffff 100%);
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
		}

		.location-thumbnail {
			width: 64px;
			height: 64px;
			border-radius: 12px;
			object-fit: cover;
			flex-shrink: 0;
		}

		.location-info {
			flex: 1;
			min-width: 0;
		}

		.location-name {
			font-size: 15px;
			font-weight: 700;
			color: var(--text-dark);
			margin-bottom: 4px;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.location-type {
			font-size: 12px;
			color: var(--stone);
			opacity: 0.7;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		/* Modern explore button */
		.explore-btn {
			margin-top: 24px;
			width: 100%;
			padding: 16px;
			font-size: 16px;
			font-weight: 700;
			background: var(--text-dark);
			color: var(--text-light);
			border: none;
			border-radius: 12px;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			opacity: 0.3;
			pointer-events: none;
		}

		.explore-btn.enabled {
			opacity: 1;
			pointer-events: all;
		}

		.explore-btn.enabled:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
			background: var(--stone);
		}

		.explore-btn.enabled:active {
			transform: translateY(0);
		}

		/* Map wrapper improvements */
		.map-wrapper {
			flex: 1;
			margin-top: 72px;
			position: relative;
		}

		#map {
			width: 100%;
			height: 100%;
		}

		/* Custom marker popup styling */
		.leaflet-popup-content-wrapper {
			border-radius: 12px;
			padding: 0;
			overflow: hidden;
		}

		.leaflet-popup-content {
			margin: 0;
			min-width: 200px;
		}

		.popup-content {
			padding: 16px;
		}

		.popup-title {
			font-size: 16px;
			font-weight: 700;
			color: var(--text-dark);
			margin-bottom: 8px;
		}

		.popup-description {
			font-size: 13px;
			color: var(--stone);
			line-height: 1.5;
			margin-bottom: 12px;
		}

		.popup-btn {
			display: inline-block;
			padding: 8px 16px;
			background: var(--text-dark);
			color: var(--text-light);
			text-decoration: none;
			border-radius: 8px;
			font-size: 13px;
			font-weight: 600;
			transition: all 0.2s ease;
		}

		.popup-btn:hover {
			background: var(--stone);
			transform: translateY(-1px);
		}

		/* Mobile responsive design */
		@media (max-width: 968px) {
			.sidebar {
				position: fixed;
				left: 0;
				top: 72px;
				width: 100%;
				max-width: 380px;
				height: calc(100vh - 72px);
				transform: translateX(-100%);
				transition: transform 0.3s ease;
				z-index: 999;
				box-shadow: 4px 0 24px rgba(0, 0, 0, 0.1);
			}

			.sidebar.open {
				transform: translateX(0);
			}

			.map-wrapper {
				width: 100%;
			}

			.mobile-toggle {
				position: fixed;
				bottom: 24px;
				right: 24px;
				width: 56px;
				height: 56px;
				border-radius: 50%;
				background: var(--text-dark);
				color: var(--text-light);
				border: none;
				font-size: 24px;
				cursor: pointer;
				z-index: 1001;
				box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
				display: flex;
				align-items: center;
				justify-content: center;
			}
		}

		@media (min-width: 969px) {
			.mobile-toggle {
				display: none;
			}
		}
	</style>
</head>

<body>
	<!-- Enhanced header -->
	<header>
		<div class="logo">МАҢҒЫСТАУ</div>
		<nav>
			<a href="index.html">Ашу</a>
			<a href="map.html" class="selected">Маңғыстау</a>
			<a href="aktau.html">Ақтау</a>
			<a href="hotels.html">Қонақүйлер</a>
			<a href="about.html">Гид</a>
		</nav>
	</header>

	<!-- Enhanced sidebar with cards -->
	<div class="sidebar" id="sidebar">
		<div class="sidebar-header">
			<h2>Орындарды зерттеу</h2>
			<div class="sidebar-subtitle">Көбірек білу үшін орынды таңдаңыз</div>
		</div>
		<div id="locationCards"></div>
		<button id="exploreBtn" class="explore-btn" disabled>Google картада көру →</button>
	</div>

	<!-- Map -->
	<div class="map-wrapper">
		<div id="map"></div>
	</div>

	<!-- Mobile menu toggle -->
	<button class="mobile-toggle" id="mobileToggle" onclick="toggleSidebar()">☰</button>

	<script>
		/* ================= DATA ================= */
		const mapPoints = [
			{
				name: "Бозжыра",
				type: "Бор төбешігі",
				description: "Драмалық ақ жарлар мен басқа дүниелік құрылымдар",
				lat: 43.451,
				lng: 54.091,
				link: "https://maps.app.goo.gl/vK8ayGY1HAe3dr7x8",
				image: "/mangistau-map/public/bozhyra.png"
			},
			{
				name: "Түзбайыр тұз алқабы",
				type: "Тұз шөлі",
				description: "Кең ақ тұз пейзажы",
				lat: 44.162,
				lng: 51.959,
				link: "https://maps.app.goo.gl/gEnghG44DjZy5VLV6",
				image: "/mangistau-map/public/tuzbair.png"
			},
			{
				name: "Айрақты-Шығылған",
				type: "Жартас құрылымы",
				description: "Ежелгі әктас сәулеті",
				lat: 43.214,
				lng: 52.214,
				link: "https://maps.app.goo.gl/HFBT2jpUkMqz45Fg7",
				image: "/mangistau-map/public/airaqty.png"
			},
			{
				name: "Қаракия ойпаты",
				type: "Геологиялық ғажайып",
				description: "Теңіз деңгейінен төмен геологиялық ғажайып",
				lat: 43.100,
				lng: 51.900,
				link: "https://maps.app.goo.gl/755FmBsDUGXpvta88",
				image: "/mangistau-map/public/kakakia.png"
			},
			{
				name: "Шерқала тауы",
				type: "Қасиетті тау",
				description: "Киіз үй пішіндес таңбалы белгі",
				lat: 44.255,
				lng: 52.020,
				link: "https://maps.app.goo.gl/aFaa1xhpM76TA6V28",
				image: "/mangistau-map/public/sherkala.png"
			},
			{
				name: "Отпан Тау",
				type: "Үстел тауы",
				description: "Салтанатты жалпақ үстел таулары",
				lat: 44.310,
				lng: 52.000,
				link: "https://maps.app.goo.gl/p3hM9VnxQPNgRJvz6",
				image: "/mangistau-map/public/otpan-tau.png"
			},
			{
				name: "Қарамсай шатқалы",
				type: "Шатқал жүйесі",
				description: "Жасырын әктас шатқал өткелдері",
				lat: 43.300,
				lng: 52.800,
				link: "https://maps.app.goo.gl/8r11Qmsqe3CoB7wV8",
				image: "/mangistau-map/public/karamsay.png"
			},
			{
				name: "Торыш алқабы",
				type: "Доптар алқабы",
				description: "Алып тас сфералар алқабы",
				lat: 43.660,
				lng: 52.470,
				link: "https://maps.app.goo.gl/V64ZhgEakmYtRBe69",
				image: "/mangistau-map/public/torysh.png"
			},
			{
				name: "Түпқараған түбегі",
				type: "Жағалық пейзаж",
				description: "Шөл Каспий теңізімен кездеседі",
				lat: 44.600,
				lng: 50.200,
				link: "https://maps.app.goo.gl/rZFV8b6NqxYpYzSr7",
				image: "/mangistau-map/public/tupkaragan.png"
			}
		]

		/* ================= MAP ================= */
		const map = L.map("map").setView([43.8, 52.2], 7)

		L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
			attribution: "© OpenStreetMap contributors",
			maxZoom: 18
		}).addTo(map)

		const locationCards = document.getElementById("locationCards")
		const exploreBtn = document.getElementById("exploreBtn")

		let selectedPark = null
		let activeCard = null
		const markers = []

		mapPoints.forEach((park, index) => {
			const card = document.createElement("div")
			card.className = "location-card"
			card.innerHTML = `
				<img src="${park.image}" alt="${park.name}" class="location-thumbnail" onerror="this.style.display='none'">
				<div class="location-info">
					<div class="location-name">${park.name}</div>
					<div class="location-type">${park.type}</div>
				</div>
			`
			locationCards.appendChild(card)

			const marker = L.marker([park.lat, park.lng]).addTo(map)
			markers.push(marker)
			
			const popupContent = `
				<div class="popup-content">
					<div class="popup-title">${park.name}</div>
					<div class="popup-description">${park.description}</div>
					<a href="${park.link}" target="_blank" class="popup-btn">Картада көру</a>
				</div>
			`
			marker.bindPopup(popupContent, {
				maxWidth: 280,
				className: 'custom-popup'
			})

			function select() {
				selectedPark = park

				document.querySelectorAll(".location-card").forEach(el =>
					el.classList.toggle("active", el === card)
				)

				marker.openPopup()
				map.setView([park.lat, park.lng], 10, {
					animate: true,
					duration: 0.5
				})

				exploreBtn.disabled = false
				exploreBtn.classList.add("enabled")
				exploreBtn.textContent = `Explore ${park.name} →`

				activeCard = card
			}

			card.onclick = select
			marker.on("click", select)
		})

		exploreBtn.onclick = () => {
			if (!selectedPark) return
			window.open(selectedPark.link, "_blank")
		}

		function toggleSidebar() {
			const sidebar = document.getElementById('sidebar')
			sidebar.classList.toggle('open')
		}

		map.on('click', function() {
			if (window.innerWidth <= 968) {
				document.getElementById('sidebar').classList.remove('open')
			}
		})
	</script>

</body>

</html>
