<!DOCTYPE html>
<html lang="kk">

<head>
	<meta charset="UTF-8" />
	<title>Ақтау қаласы – Маңғыстау Explorer</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
	
	<!-- Leaflet -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		/* Using light theme colors to match map.html */
		:root {
			--sand: #E8D5C4;
			--stone: #4A4A4A;
			--desert: #C19A6B;
			--sky: #87CEEB;
			--text-dark: #2C2C2C;
			--text-light: #FFFFFF;
			--bg-light: #F8F6F3;
			--card-bg: #FFFFFF;
		}

		html,
		body {
			margin: 0;
			height: 100%;
			font-family: 'Inter', system-ui, sans-serif;
			overflow: hidden;
		}

		body {
			display: flex;
			background: var(--bg-light);
		}

		/* Enhanced header with backdrop blur */
		header {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 72px;
			z-index: 1000;
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 0 clamp(20px, 5vw, 60px);
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(12px);
			-webkit-backdrop-filter: blur(12px);
			border-bottom: 1px solid rgba(0, 0, 0, 0.08);
			box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
		}

		.logo {
			font-size: 20px;
			font-weight: 800;
			letter-spacing: -0.02em;
			color: var(--text-dark);
		}

		nav {
			display: flex;
			gap: 40px;
		}

		nav a {
			color: var(--text-dark);
			text-decoration: none;
			font-size: 15px;
			font-weight: 600;
			opacity: 0.7;
			transition: opacity 0.2s ease, transform 0.2s ease;
			position: relative;
		}

		nav a:hover {
			opacity: 1;
			transform: translateY(-1px);
		}

		nav a.selected {
			opacity: 1;
		}

		nav a.selected::after {
			content: '';
			position: absolute;
			bottom: -8px;
			left: 0;
			right: 0;
			height: 2px;
			background: var(--text-dark);
			border-radius: 2px;
		}

		/* Modern sidebar with card design */
		.sidebar {
			width: 380px;
			background: var(--bg-light);
			padding: 92px 24px 24px;
			box-sizing: border-box;
			overflow-y: auto;
			border-right: 1px solid rgba(0, 0, 0, 0.08);
		}

		.sidebar::-webkit-scrollbar {
			width: 8px;
		}

		.sidebar::-webkit-scrollbar-track {
			background: transparent;
		}

		.sidebar::-webkit-scrollbar-thumb {
			background: rgba(0, 0, 0, 0.15);
			border-radius: 4px;
		}

		.sidebar::-webkit-scrollbar-thumb:hover {
			background: rgba(0, 0, 0, 0.25);
		}

		.sidebar-header {
			margin-bottom: 24px;
		}

		.sidebar h2 {
			font-size: 24px;
			font-weight: 800;
			color: var(--text-dark);
			margin-bottom: 8px;
			letter-spacing: -0.02em;
		}

		.sidebar-subtitle {
			font-size: 14px;
			color: var(--stone);
			opacity: 0.7;
		}

		/* Added filter buttons */
		.filter-group {
			display: flex;
			gap: 8px;
			flex-wrap: wrap;
			margin-bottom: 20px;
		}

		.filter-btn {
			background: var(--card-bg);
			border: 2px solid rgba(0, 0, 0, 0.08);
			color: var(--stone);
			padding: 8px 16px;
			border-radius: 20px;
			font-size: 13px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s;
		}

		.filter-btn:hover {
			border-color: var(--desert);
		}

		.filter-btn.active {
			background: var(--stone);
			color: var(--text-light);
			border-color: var(--stone);
		}

		/* Beautiful location cards with images */
		.location-card {
			background: var(--card-bg);
			border-radius: 16px;
			padding: 16px;
			margin-bottom: 12px;
			cursor: pointer;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			border: 2px solid transparent;
			display: flex;
			gap: 16px;
			align-items: center;
		}

		.location-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
			border-color: var(--desert);
		}

		/* Changed active card color to sky blue */
		.location-card.active {
			border-color: var(--sky);
			background: linear-gradient(135deg, #e0f4ff 0%, #ffffff 100%);
			box-shadow: 0 4px 16px rgba(135, 206, 235, 0.3);
		}

		.location-thumbnail {
			width: 64px;
			height: 64px;
			border-radius: 12px;
			object-fit: cover;
			flex-shrink: 0;
		}

		.location-info {
			flex: 1;
			min-width: 0;
		}

		.location-name {
			font-size: 15px;
			font-weight: 700;
			color: var(--text-dark);
			margin-bottom: 4px;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.location-type {
			font-size: 12px;
			color: var(--stone);
			opacity: 0.7;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		/* Map wrapper improvements */
		.map-wrapper {
			flex: 1;
			margin-top: 72px;
			position: relative;
		}

		#map {
			width: 100%;
			height: 100%;
		}

		/* Custom marker popup styling */
		.leaflet-popup-content-wrapper {
			border-radius: 12px;
			padding: 0;
			overflow: hidden;
		}

		.leaflet-popup-content {
			margin: 0;
			min-width: 200px;
		}

		.popup-content {
			padding: 16px;
		}

		.popup-title {
			font-size: 16px;
			font-weight: 700;
			color: var(--text-dark);
			margin-bottom: 8px;
		}

		.popup-description {
			font-size: 13px;
			color: var(--stone);
			line-height: 1.5;
			margin-bottom: 12px;
		}

		.popup-btn {
			display: inline-block;
			padding: 8px 16px;
			background: var(--text-dark);
			color: var(--text-light);
			text-decoration: none;
			border-radius: 8px;
			font-size: 13px;
			font-weight: 600;
			transition: all 0.2s ease;
		}

		.popup-btn:hover {
			background: var(--stone);
			transform: translateY(-1px);
		}

		/* Mobile responsive design */
		@media (max-width: 968px) {
			.sidebar {
				position: fixed;
				left: 0;
				top: 72px;
				width: 100%;
				max-width: 380px;
				height: calc(100vh - 72px);
				transform: translateX(-100%);
				transition: transform 0.3s ease;
				z-index: 999;
				box-shadow: 4px 0 24px rgba(0, 0, 0, 0.1);
			}

			.sidebar.open {
				transform: translateX(0);
			}

			.map-wrapper {
				width: 100%;
			}

			.mobile-toggle {
				position: fixed;
				bottom: 24px;
				right: 24px;
				width: 56px;
				height: 56px;
				border-radius: 50%;
				background: var(--text-dark);
				color: var(--text-light);
				border: none;
				font-size: 24px;
				cursor: pointer;
				z-index: 1001;
				box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
				display: flex;
				align-items: center;
				justify-content: center;
			}
		}

		@media (min-width: 969px) {
			.mobile-toggle {
				display: none;
			}
		}
	</style>
</head>

<body>
	<!-- Enhanced header -->
	<header>
		<div class="logo">МАҢҒЫСТАУ</div>
		<nav>
			<a href="index.html">Ашу</a>
			<a href="map.html">Маңғыстау</a>
			<a href="aktau.html" class="selected">Ақтау</a>
			<a href="about.html">Гид</a>
		</nav>
	</header>

	<!-- Enhanced sidebar with cards -->
	<div class="sidebar" id="sidebar">
		<div class="sidebar-header">
			<h2>Ақтау қаласы</h2>
			<div class="sidebar-subtitle">Қаланың ең жақсы орындарын табыңыз</div>
		</div>

		<!-- Added filter buttons for categories -->
		<div class="filter-group">
			<button class="filter-btn active" data-filter="all">Барлығы</button>
			<button class="filter-btn" data-filter="restaurant">Ресторандар</button>
			<button class="filter-btn" data-filter="cafe">Кафе</button>
			<button class="filter-btn" data-filter="shop">Дүкендер</button>
		</div>

		<div id="locationCards"></div>
	</div>

	<!-- Map -->
	<div class="map-wrapper">
		<div id="map"></div>
	</div>

	<!-- Mobile menu toggle -->
	<button class="mobile-toggle" id="mobileToggle" onclick="toggleSidebar()">☰</button>

	<script>
		const places = [
			{
				id: "bozjyra",
				name: "Ресторан «Бозжыра»",
				type: "restaurant",
				categoryLabel: "Ресторан",
				coords: [43.6585, 51.167],
				address: "Актау, ресторан «Бозжыра» (11а микрорайон, 1/4, 2 этаж)",
				description: "Ресторан «Бозжыра» — это современный семейный ресторан, сочетающий национальные традиции и лучшие образцы европейской кухни.",
				tags: ["национальная кухня", "семейный ужин", "панорамный вид"],
				image: "https://avatars.mds.yandex.net/get-altay/1027861/2a000001876a5baaaa5d856e14b4b687728e/L_height",
				link: "https://maps.google.com/?q=43.6585,51.167"
			},
			{
				id: "gadim",
				name: "Шашлыки от дяди Гадима",
				type: "cafe",
				categoryLabel: "Кафе-ресторан",
				coords: [43.6578, 51.1725],
				address: "Актау, «Шашлыки от дяди Гадима» (8-й микрорайон, 39Б)",
				description: "Главная особенность заведения — всегда свежие и горячие блюда. Шашлыки готовятся традиционным способом на натуральных углях.",
				tags: ["шашлык", "гриль", "на вынос"],
				image: "https://avatars.mds.yandex.net/get-altay/11183932/2a0000019165d464c38265eae4fd38030153/L_height",
				link: "https://maps.google.com/?q=43.6578,51.1725"
			},
			{
				id: "mashoda",
				name: "Ресторан Alash Orda",
				type: "restaurant",
				categoryLabel: "Ресторан",
				coords: [43.6535, 51.1605],
				address: "Актау, ресторан Alash Orda (ЖК Albion, 19-й микрорайон, 28)",
				description: "Современный ресторан со стильным интерьером, сочетающий динамику городской жизни и утончённую эстетику.",
				tags: ["современный дизайн", "вид на город", "десерты"],
				image: "https://avatars.mds.yandex.net/get-altay/14021521/2a00000194c813e4898df7d7331ba74f458a/L_height",
				link: "https://maps.google.com/?q=43.6535,51.1605"
			},
			{
				id: "hti",
				name: "Ресторан ХАЕТ",
				type: "restaurant",
				categoryLabel: "Ресторан",
				coords: [43.6539, 51.1733],
				address: "Актау, ресторан ХАЕТ (ТЦ «Астана», 14-й микрорайон, 33/2, цокольный этаж)",
				description: "Ресторан ХАЕТ — это комфортное и надёжное место для деловых встреч и семейных ужинов.",
				tags: ["бизнес-ланч", "банкеты", "классическое меню"],
				image: "https://avatars.mds.yandex.net/get-altay/13220786/2a00000191f095c2447f56cb8fa664509fa1/L_height",
				link: "https://maps.google.com/?q=43.6539,51.1733"
			},
			{
				id: "coffeecity",
				name: "CoffeeCity",
				type: "cafe",
				categoryLabel: "Кофейня",
				coords: [43.6515, 51.168],
				address: "Актау, кофейня CoffeeCity (ЖК Green Plaza, 17-й микрорайон, 6)",
				description: "CoffeeCity — это современная кофейня, позволяющая почувствовать ритм городской жизни. Здесь готовят specialty кофе высокого качества.",
				tags: ["кофе", "to go", "co-working"],
				image: "https://cachizer3.2gis.com/reviews-photos/d9dda883-1a47-45de-9192-5dd1561ea7b9.jpg?w=320",
				link: "https://maps.google.com/?q=43.6515,51.168"
			},
			{
				id: "coffeeboom",
				name: "CoffeeBoom",
				type: "cafe",
				categoryLabel: "Кофейня",
				coords: [43.6519, 51.1638],
				address: "Актау, кофейня CoffeeBoom (ЖК Тамшалы, 14-й микрорайон, 58)",
				description: "CoffeeBoom — это кофейня современного формата, где лёгкая музыка и уютная атмосфера создают приятное настроение.",
				tags: ["авторские напитки", "встречи с друзьями", "instagram-интерьер"],
				image: "https://avatars.mds.yandex.net/get-altay/15017195/2a0000019504dbbafc6313367880a677f0ea/L_height",
				link: "https://maps.google.com/?q=43.6519,51.1638"
			},
			{
				id: "march",
				name: "Магазин March",
				type: "shop",
				categoryLabel: "Магазин",
				coords: [43.6544, 51.1691],
				address: "Актау, магазин March (13-й микрорайон, 14, 1 этаж)",
				description: "March — это современный магазин одежды и аксессуаров в стиле casual для повседневной жизни.",
				tags: ["одежда", "аксессуары", "casual стиль"],
				image: "https://avatars.mds.yandex.net/get-altay/6548191/2a0000018e1d27b9316f3f28429c9a2f8086/L_height",
				link: "https://maps.google.com/?q=43.6544,51.1691"
			},
			{
				id: "kidspharm",
				name: "Магазин Kids Pharm",
				type: "shop",
				categoryLabel: "Магазин",
				coords: [43.6532, 51.1652],
				address: "Актау, Kids Pharm (ЖК Ханшайым, 19-й микрорайон, 20)",
				description: "Kids Pharm — это специализированный магазин, сочетающий товары для детей и формат аптеки.",
				tags: ["детские товары", "аптека", "витамины"],
				image: "https://avatars.mds.yandex.net/get-altay/13325287/2a0000018f5db2de2fed8bce83f2b28970b5/orig",
				link: "https://maps.google.com/?q=43.6532,51.1652"
			},
			{
				id: "richsize",
				name: "Магазин Rich Size",
				type: "shop",
				categoryLabel: "Магазин",
				coords: [43.6562, 51.1618],
				address: "Актау, магазин Rich Size (ЖК Zaman, проспект Исатая Тайманова, 48)",
				description: "Rich Size — это современный магазин, специализирующийся на стильной одежде больших размеров.",
				tags: ["plus size", "мода", "комфорт"],
				image: "https://cachizer1.2gis.com/reviews-photos/d231e881-a7a6-4a2b-af67-412a337eadec.jpg?w=1920",
				link: "https://maps.google.com/?q=43.6562,51.1618"
			},
			{
				id: "urbo",
				name: "URBO",
				type: "cafe",
				categoryLabel: "Кофейня",
				coords: [43.6592, 51.1639],
				address: "Актау, URBO (ЖК Albion, 19-й микрорайон, 28)",
				description: "URBO — это современная кофейня, отражающая ритм городской жизни. Пространство выполнено в урбанистическом стиле.",
				tags: ["urban style", "lifestyle", "coffee place"],
				image: "https://avatars.mds.yandex.net/get-altay/14635327/2a00000197a65a64489f06c461d1a2e582b4/L_height",
				link: "https://maps.google.com/?q=43.6592,51.1639"
			},
			{
				id: "merhaba",
				name: "Merhaba",
				type: "restaurant",
				categoryLabel: "Ресторан",
				coords: [43.6524, 51.1702],
				address: "Актау, Merhaba (БЦ Nomad, 16-й микрорайон, 6)",
				description: "Merhaba — это уютный центр, позволяющий почувствовать тёплый дух восточной культуры.",
				tags: ["восточный стиль", "чай", "вкусная еда"],
				image: "https://avatars.mds.yandex.net/get-altay/13594632/2a000001941644a346fc3eeb497dd488983f/orig",
				link: "https://maps.google.com/?q=43.6524,51.1702"
			},
			{
				id: "shogy",
				name: "Shogy",
				type: "shop",
				categoryLabel: "Магазин",
				coords: [43.6571, 51.1765],
				address: "Ақтау, shogy (​17-й микрорайон, 33/6)",
				description: "Shogy — это современный магазин женской одежды, где сочетаются стиль, комфорт и актуальные модные тенденции.",
				tags: ["женская одежда", "магазин", "красота"],
				image: "https://avatars.mds.yandex.net/get-altay/14014133/2a00000191bef363be7608be275af1689e96/L_height",
				link: "https://maps.google.com/?q=43.6571,51.1765"
			}
		]

		/* ================= MAP ================= */
		const map = L.map("map").setView([43.655, 51.17], 13)

		L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
			attribution: "© OpenStreetMap contributors",
			maxZoom: 18
		}).addTo(map)

		const locationCards = document.getElementById("locationCards")
		let selectedPlace = null
		let activeCard = null
		const markers = []
		let currentFilter = 'all'

		/* Color coding function for different place types */
		function getTypeColor(type) {
			switch(type) {
				case 'restaurant': return '#fb7185'
				case 'cafe': return '#22c55e'
				case 'shop': return '#3b82f6'
				default: return '#f59e0b'
			}
		}

		function renderCards(filter = 'all') {
			locationCards.innerHTML = ''
			currentFilter = filter

			places.forEach((place, index) => {
				if (filter !== 'all' && place.type !== filter) return

				const card = document.createElement("div")
				card.className = "location-card"
				card.innerHTML = `
					<img src="${place.image}" alt="${place.name}" class="location-thumbnail" onerror="this.style.display='none'">
					<div class="location-info">
						<div class="location-name">${place.name}</div>
						<div class="location-type">${place.categoryLabel}</div>
					</div>
				`
				locationCards.appendChild(card)

				function select() {
					selectedPlace = place

					document.querySelectorAll(".location-card").forEach(el =>
						el.classList.remove("active")
					)
					card.classList.add("active")

					marker.openPopup()
					map.setView([place.coords[0], place.coords[1]], 15, {
						animate: true,
						duration: 0.5
					})

					activeCard = card
				}

				card.onclick = select

				/* Custom marker with color based on type */
				const markerColor = getTypeColor(place.type)
				const marker = L.marker([place.coords[0], place.coords[1]], {
					icon: L.divIcon({
						className: '',
						html: `<div style="width:20px;height:20px;border-radius:50%;background:${markerColor};border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.3);"></div>`,
						iconSize: [20, 20],
						iconAnchor: [10, 10]
					})
				}).addTo(map)
				
				markers.push(marker)
				
				const popupContent = `
					<div class="popup-content">
						<div class="popup-title">${place.name}</div>
						<div class="popup-description">${place.description}</div>
						<a href="${place.link}" target="_blank" class="popup-btn">Картада ашу</a>
					</div>
				`
				marker.bindPopup(popupContent, {
					maxWidth: 280,
					className: 'custom-popup'
				})

				marker.on("click", select)
			})
		}

		/* Filter button functionality */
		document.querySelectorAll('.filter-btn').forEach(btn => {
			btn.addEventListener('click', () => {
				document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'))
				btn.classList.add('active')
				
				// Clear existing markers
				markers.forEach(m => map.removeLayer(m))
				markers.length = 0
				
				renderCards(btn.dataset.filter)
			})
		})

		function toggleSidebar() {
			const sidebar = document.getElementById('sidebar')
			sidebar.classList.toggle('open')
		}

		map.on('click', function() {
			if (window.innerWidth <= 968) {
				document.getElementById('sidebar').classList.remove('open')
			}
		})

		// Initial render
		renderCards('all')
	</script>

</body>

</html>
